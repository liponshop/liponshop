<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reset Password - LiponShop Admin</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
--primary: #4f46e5;
--primary-dark: #4338ca;
--success: #10b981;
--danger: #ef4444;
--dark: #1f2937;
--white: #ffffff;
--gray: #6b7280;
--border: #e5e7eb;
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Poppins', sans-serif;
}
body {
background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
min-height: 100vh;
display: flex;
align-items: center;
justify-content: center;
padding: 20px;
}
.reset-container {
background: var(--white);
padding: 40px;
border-radius: 16px;
box-shadow: 0 20px 60px rgba(0,0,0,0.3);
max-width: 450px;
width: 100%;
}
.reset-header {
text-align: center;
margin-bottom: 30px;
}
.reset-header i {
font-size: 48px;
color: var(--primary);
margin-bottom: 15px;
}
.reset-header h1 {
font-size: 24px;
color: var(--dark);
margin-bottom: 5px;
}
.reset-header p {
color: var(--gray);
font-size: 14px;
}
.form-group {
margin-bottom: 20px;
}
.form-group label {
display: block;
margin-bottom: 8px;
font-weight: 500;
color: var(--dark);
}
.form-group input {
width: 100%;
padding: 12px 15px;
border: 2px solid var(--border);
border-radius: 10px;
font-size: 14px;
transition: all 0.3s;
}
.form-group input:focus {
border-color: var(--primary);
outline: none;
box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1);
}
.btn {
width: 100%;
padding: 14px;
background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
color: var(--white);
border: none;
border-radius: 10px;
font-size: 16px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
margin-top: 10px;
}
.btn:hover {
transform: translateY(-2px);
box-shadow: 0 10px 25px rgba(79, 70, 229, 0.3);
}
.btn:disabled {
background: #9ca3af;
cursor: not-allowed;
transform: none;
}
.btn-secondary {
background: var(--white);
color: var(--primary);
border: 2px solid var(--primary);
}
.btn-secondary:hover {
background: var(--primary);
color: var(--white);
}
.otp-inputs {
display: flex;
gap: 10px;
justify-content: center;
margin: 20px 0;
}
.otp-input {
width: 50px;
height: 50px;
text-align: center;
font-size: 20px;
font-weight: 600;
border: 2px solid var(--border);
border-radius: 10px;
}
.otp-input:focus {
border-color: var(--primary);
outline: none;
}
.step {
display: none;
}
.step.active {
display: block;
}
.alert {
padding: 12px 15px;
border-radius: 8px;
margin-bottom: 20px;
display: none;
}
.alert-success {
background: #d1fae5;
color: #065f46;
border: 1px solid var(--success);
}
.alert-error {
background: #fee2e2;
color: #991b1b;
border: 1px solid var(--danger);
}
.alert.show {
display: block;
}
.timer {
text-align: center;
color: var(--gray);
font-size: 14px;
margin-top: 15px;
}
.timer span {
color: var(--primary);
font-weight: 600;
}
.back-link {
display: block;
text-align: center;
margin-top: 20px;
color: var(--gray);
text-decoration: none;
font-size: 14px;
}
.back-link:hover {
color: var(--primary);
}
</style>
</head>
<body>
<div class="reset-container">
<div class="reset-header">
<i class="fas fa-shield-alt"></i>
<h1>Admin Password Reset</h1>
<p>Enter your registered mobile number</p>
</div>

<!-- Step 1: Enter Mobile -->
<div class="step active" id="step1">
<div class="alert alert-error" id="alertError"></div>
<div class="form-group">
<label><i class="fas fa-mobile-alt"></i> Mobile Number</label>
<input type="tel" id="resetMobile" placeholder="017XXXXXXXX" pattern="01[3-9][0-9]{8}" required>
</div>
<button class="btn" onclick="sendOTP()">
<i class="fas fa-paper-plane"></i> Send OTP
</button>
<a href="admin-login.html" class="back-link">
<i class="fas fa-arrow-left"></i> Back to Login
</a>
</div>

<!-- Step 2: Verify OTP -->
<div class="step" id="step2">
<div class="alert alert-success" id="alertSuccess">
‚úÖ OTP sent to <strong id="maskedMobile">017******267</strong>
</div>
<p style="text-align: center; margin-bottom: 15px; color: var(--gray);">Enter 6-digit OTP</p>
<div class="otp-inputs">
<input type="text" class="otp-input" maxlength="1" id="otp1" oninput="moveNext(this, 'otp2')">
<input type="text" class="otp-input" maxlength="1" id="otp2" oninput="moveNext(this, 'otp3')">
<input type="text" class="otp-input" maxlength="1" id="otp3" oninput="moveNext(this, 'otp4')">
<input type="text" class="otp-input" maxlength="1" id="otp4" oninput="moveNext(this, 'otp5')">
<input type="text" class="otp-input" maxlength="1" id="otp5" oninput="moveNext(this, 'otp6')">
<input type="text" class="otp-input" maxlength="1" id="otp6">
</div>
<button class="btn" onclick="verifyOTP()">
<i class="fas fa-check"></i> Verify OTP
</button>
<div class="timer">
Resend OTP in <span id="resendTimer">60</span> seconds
</div>
<button class="btn btn-secondary" id="resendBtn" onclick="resendOTP()" disabled style="margin-top: 10px;">
<i class="fas fa-redo"></i> Resend OTP
</button>
<a href="#" class="back-link" onclick="goBack()">
<i class="fas fa-arrow-left"></i> Change Number
</a>
</div>

<!-- Step 3: Set New Password -->
<div class="step" id="step3">
<div class="alert alert-success">‚úÖ OTP Verified!</div>
<div class="form-group">
<label><i class="fas fa-lock"></i> New Password</label>
<input type="password" id="newPassword" placeholder="Enter new password" minlength="6" required>
</div>
<div class="form-group">
<label><i class="fas fa-lock"></i> Confirm Password</label>
<input type="password" id="confirmPassword" placeholder="Confirm new password" required>
</div>
<button class="btn" onclick="resetPassword()">
<i class="fas fa-save"></i> Reset Password
</button>
</div>
</div>

<script>
let generatedOTP = '';
let resetMobile = '';
let otpTimer = null;

function generateOTP() {
return Math.floor(100000 + Math.random() * 900000).toString();
}

function maskMobile(mobile) {
return mobile.substring(0, 3) + '******' + mobile.substring(7);
}

function sendOTP() {
const mobile = document.getElementById('resetMobile').value.trim();
const alertError = document.getElementById('alertError');

const mobileRegex = /^01[3-9][0-9]{8}$/;
if (!mobileRegex.test(mobile)) {
alertError.textContent = 'Please enter a valid Bangladesh mobile number!';
alertError.classList.add('show');
return;
}

// Check if admin exists
const adminData = JSON.parse(localStorage.getItem('adminData'));
if (!adminData || adminData.phone !== mobile) {
alertError.textContent = 'No admin account found with this number!';
alertError.classList.add('show');
return;
}

resetMobile = mobile;
generatedOTP = generateOTP();

console.log('üîê Admin OTP for ' + mobile + ': ' + generatedOTP);
alert('üîê DEMO MODE: OTP is ' + generatedOTP);

document.getElementById('step1').classList.remove('active');
document.getElementById('step2').classList.add('active');
document.getElementById('maskedMobile').textContent = maskMobile(mobile);
startResendTimer();
}

function moveNext(current, nextId) {
if (current.value.length === 1 && nextId) {
document.getElementById(nextId).focus();
}
}

function verifyOTP() {
const otp = document.getElementById('otp1').value +
document.getElementById('otp2').value +
document.getElementById('otp3').value +
document.getElementById('otp4').value +
document.getElementById('otp5').value +
document.getElementById('otp6').value;

if (otp === generatedOTP) {
document.getElementById('step2').classList.remove('active');
document.getElementById('step3').classList.add('active');
if (otpTimer) clearInterval(otpTimer);
} else {
alert('‚ùå Invalid OTP! Please try again.');
for (let i = 1; i <= 6; i++) {
document.getElementById('otp' + i).value = '';
}
document.getElementById('otp1').focus();
}
}

function resendOTP() {
generatedOTP = generateOTP();
console.log('üîê New Admin OTP: ' + generatedOTP);
alert('üîê New OTP: ' + generatedOTP);
startResendTimer();
}

function startResendTimer() {
let seconds = 60;
const timerEl = document.getElementById('resendTimer');
const resendBtn = document.getElementById('resendBtn');
resendBtn.disabled = true;
otpTimer = setInterval(() => {
seconds--;
timerEl.textContent = seconds;
if (seconds <= 0) {
clearInterval(otpTimer);
resendBtn.disabled = false;
timerEl.textContent = '0';
}
}, 1000);
}

function resetPassword() {
const newPassword = document.getElementById('newPassword').value;
const confirmPassword = document.getElementById('confirmPassword').value;

if (newPassword.length < 6) {
alert('Password must be at least 6 characters!');
return;
}

if (newPassword !== confirmPassword) {
alert('Passwords do not match!');
return;
}

// Save new password to adminData
const adminData = JSON.parse(localStorage.getItem('adminData')) || {};
adminData.password = newPassword;
localStorage.setItem('adminData', JSON.stringify(adminData));

alert('‚úÖ Password reset successful!');
window.location.href = 'admin-login.html';
}

function goBack() {
document.getElementById('step2').classList.remove('active');
document.getElementById('step1').classList.add('active');
if (otpTimer) clearInterval(otpTimer);
}
</script>
</body>
</html>